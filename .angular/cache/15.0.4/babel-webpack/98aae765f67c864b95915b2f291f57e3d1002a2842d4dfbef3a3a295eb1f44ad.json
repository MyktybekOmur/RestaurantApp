{"ast":null,"code":"import { __awaiter, __decorate } from \"tslib\";\nimport __NG_CLI_RESOURCE__0 from \"./add-product.component.html?ngResource\";\nimport __NG_CLI_RESOURCE__1 from \"./add-product.component.scss?ngResource\";\nimport { Component, Input } from '@angular/core';\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\nimport { AlertController, LoadingController, ModalController } from '@ionic/angular';\nimport { ProductsService } from 'src/app/services/products/products.service';\nlet AddProductComponent = class AddProductComponent {\n  constructor(modalCtrl, loadingController, productApi, alertController) {\n    this.modalCtrl = modalCtrl;\n    this.loadingController = loadingController;\n    this.productApi = productApi;\n    this.alertController = alertController;\n    this.item = {\n      title: '',\n      price: '',\n      description: '',\n      is_active: false\n    };\n    this.form = {\n      title: '',\n      price: '',\n      description: '',\n      image: '',\n      is_active: false\n    };\n  }\n  ngOnInit() {\n    if (this.type) {\n      this.productApi.getProduct(this.item.id).subscribe(res => {\n        this.form = res;\n      });\n    }\n  }\n  cancel() {\n    return this.modalCtrl.dismiss(null, 'cancel');\n  }\n  confirm() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const body = {\n        title: this.form.title,\n        price: Number(this.form.price),\n        description: this.form.description,\n        image: '',\n        is_active: this.form.is_active\n      };\n      const loading = yield this.loadingController.create();\n      yield loading.present();\n      if (this.type) {\n        this.result = yield this.productApi.updateProduct(this.item.id, this.form);\n      } else {\n        this.result = yield this.productApi.setProduct(body);\n        console.log(this.result);\n      }\n      loading.dismiss();\n      if (!this.result) {\n        const alert = yield this.alertController.create({\n          header: 'Upload failed',\n          message: 'There was a problem uploading your avatar.',\n          buttons: ['OK']\n        });\n        yield alert.present();\n      } else {\n        this.cancel();\n      }\n    });\n  }\n  changeImage() {\n    return __awaiter(this, void 0, void 0, function* () {\n      const image = yield Camera.getPhoto({\n        quality: 90,\n        allowEditing: false,\n        resultType: CameraResultType.Base64,\n        source: CameraSource.Photos // Camera, Photos or Prompt!\n      });\n\n      if (image) {\n        const loading = yield this.loadingController.create();\n        yield loading.present();\n        const result = yield this.productApi.uploadImage(image, this.item.id);\n        loading.dismiss();\n        if (!result) {\n          const alert = yield this.alertController.create({\n            header: 'Upload failed',\n            message: 'There was a problem uploading your avatar.',\n            buttons: ['OK']\n          });\n          yield alert.present();\n        }\n      }\n    });\n  }\n};\nAddProductComponent.ctorParameters = () => [{\n  type: ModalController\n}, {\n  type: LoadingController\n}, {\n  type: ProductsService\n}, {\n  type: AlertController\n}];\nAddProductComponent.propDecorators = {\n  type: [{\n    type: Input\n  }],\n  item: [{\n    type: Input\n  }]\n};\nAddProductComponent = __decorate([Component({\n  selector: 'app-add-product',\n  template: __NG_CLI_RESOURCE__0,\n  styles: [__NG_CLI_RESOURCE__1]\n})], AddProductComponent);\nexport { AddProductComponent };","map":{"version":3,"mappings":"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","names":["Component","Input","Camera","CameraResultType","CameraSource","AlertController","LoadingController","ModalController","ProductsService","AddProductComponent","constructor","modalCtrl","loadingController","productApi","alertController","title","price","description","is_active","image","ngOnInit","type","getProduct","item","id","subscribe","res","form","cancel","dismiss","confirm","body","Number","loading","create","present","result","updateProduct","setProduct","console","log","alert","header","message","buttons","changeImage","getPhoto","quality","allowEditing","resultType","Base64","source","Photos","uploadImage","selector","template"],"sourceRoot":"","sources":["/Users/myktybekomurbekov/Documents/projects/NodeJS/RestaurantApp/src/app/modals/add-product/add-product.component.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { Camera, CameraResultType, CameraSource } from '@capacitor/camera';\nimport { AlertController, LoadingController, ModalController } from '@ionic/angular';\nimport { ProductsService } from 'src/app/services/products/products.service';\n\n@Component({\n  selector: 'app-add-product',\n  templateUrl: './add-product.component.html',\n  styleUrls: ['./add-product.component.scss'],\n})\nexport class AddProductComponent implements OnInit  {\n\n  name: string;\n  @Input() type: boolean;\n  @Input() item: any = {\n    title:'',\n    price:'',\n    description:'',\n    is_active:false\n  };\n  form: any = {\n    title:'',\n    price:'',\n    description:'',\n    image:'',\n    is_active:false\n  }\n  result: any;\n\n  constructor(private modalCtrl: ModalController,\n    private loadingController: LoadingController,\n    private productApi:ProductsService,\n    private alertController: AlertController,) { }\n\n  ngOnInit(): void {\n    if(this.type){\n      this.productApi.getProduct(this.item.id).subscribe((res)=>{\n        this.form = res;\n      })\n    \n    }\n\n  }\n\n  cancel() {\n    return this.modalCtrl.dismiss(null, 'cancel');\n  }\n\n  async confirm() {\n    const body = {\n      title:this.form.title,\n      price:Number(this.form.price),\n      description:this.form.description,\n      image:'',\n      is_active:this.form.is_active\n    }\n\n    const loading = await this.loadingController.create();\n    await loading.present();\n    if (this.type) {\n      this.result = await this.productApi.updateProduct(this.item.id, this.form);\n    } else {\n     \n      this.result = await this.productApi.setProduct(body);\n      console.log(this.result)\n    }\n\n    loading.dismiss();\n\n    if (!this.result) {\n      const alert = await this.alertController.create({\n        header: 'Upload failed',\n        message: 'There was a problem uploading your avatar.',\n        buttons: ['OK'],\n      });\n      await alert.present();\n    } else {\n      this.cancel();\n    }\n    \n  }\n  async changeImage() {\n  \n    const image = await Camera.getPhoto({\n      quality: 90,\n      allowEditing: false,\n      resultType: CameraResultType.Base64,\n      source: CameraSource.Photos, // Camera, Photos or Prompt!\n    });\n \n    if (image) {\n      const loading = await this.loadingController.create();\n      await loading.present();\n \n      const result = await this.productApi.uploadImage(image,this.item.id);\n      loading.dismiss();\n \n      if (!result) {\n        const alert = await this.alertController.create({\n          header: 'Upload failed',\n          message: 'There was a problem uploading your avatar.',\n          buttons: ['OK'],\n        });\n        await alert.present();\n      }\n    }\n  }\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}